	<!DOCTYPE html>
	<html lang="pt-BR">
	<head>
		<meta charset="UTF-8">
		<meta name="viewport" content="width=device-width, initial-scale=1.0">
		<title>Planificação Econômica Democrática com Otimização</title>
		<link rel="icon" href="./favicon.ico" type="image/x-icon">
		<script src="./js/libraries/mathjs/11.10.1/math.js"></script>
		<script src="./js/libraries/three.js/r128/three.min.js"></script>
		<script src="./js/libraries/qrcodejs/qrcode.min.js"></script>
		<link rel="stylesheet" href="css/components/style.css">
	</head>
	<body>
	
		<div id="welcomeModal" class="modal">
			<div class="modal-content">
				<div class="modal-title-bar">
					<img src="./images/estrelaVermelha.png" alt="Ícone da Estrela Vermelha">
					<span>Planificação Econômica Democrática e com Otimização</span>
					&nbsp;<img src="./images/estrelaVermelha.png" alt="Ícone de estrela">
					<button class="close" onclick="closeWelcomeModal()">&times;</button>
				</div>
				<br>
				<img src="./images/animatedLenin.gif" alt="Imagem de boas-vindas" class="welcome-image">
				<h2>Bem-Vindo à Ditadura do Proletariado, Companheiro!</h2>
				<div id="welcomeTicker" class="welcome-ticker">
					<span>É hora de arrumarmos a casa!</span>
				</div>
				
			</div>
		</div>

	<div id="successBox">Salvo!</div>


		<br>&nbsp <br> &nbsp <br> &nbsp <br> &nbsp <br> &nbsp <br>
		<h1>
		Planificacao Economica |&nbsp;<audio id="audioContainer" src="https://cast.hoost.com.br:20064/stream" autoplay controls></audio>
		&nbsp;
		<button id="languageButton" onclick="toggleLanguageMenu(event)">L</button>
		<div id="languageMenu" style="display: none;">
			<button onclick="translatePage('pt')">Português</button>
			<button onclick="translatePage('es')">Español</button>
			<button onclick="translatePage('ru')">Русский</button>
			<button onclick="translatePage('ar')">العربية</button>
			<button onclick="translatePage('fr')">Français</button>
			<button onclick="translatePage('en')">English</button>
			<button onclick="translatePage('yo')">Èdè Yorùbá</button>
			<button onclick="translatePage('zh')">中文</button>
		</div>

		</h1>
		<div id="infoBar" class="info-bar">
			<!-- Linha com GIF e informações de localização, data e hora -->
			<div class="info-row">
				<img src="./images/hammerAndSickle.gif" alt="Foice e Martelo" class="info-gif">
				<span id="infoText"></span>
			</div>
			<!-- Letreiro com imagem -->
		<div id="newsTicker" class="news-ticker">
			<marquee id="newsMarquee" style="font-size: 16px; color: white;"></marquee>
			<img src="./images/graphIcon.png" alt="Ícone de gráfico" class="ticker-icon">
		</div>
		</div>



	<div id="loginSection" class="config-section" style="display: none;">
		<h2>Login</h2>
		<!-- Campo Nome de Usuário -->
		<label for="username">Nome de Usuário: </label>
		<input type="text" id="username" name="username" placeholder="Digite seu nome de usuário" maxlength="55" style="width: 250px;">
		<br><br>

		<!-- Campo Senha -->
		<label for="password">Senha: </label>
		<input type="password" id="password" name="password" placeholder="Digite sua senha">
		<br><br>

		<!-- Botões Entrar e Cadastre-se -->
		<button id="loginButton" onclick="handleLogin()">Entrar</button>
		<button id="registerButton" onclick="showRegistrationFields()">Cadastre-se</button>
		<br><br>

		<div id="registrationFields" style="display: none;">
		
			<label for="nameRegistration" style="margin-left: 10px;">Nome:</label>
			<input type="text" id="nameRegistration" placeholder="Digite seu nome completo" style="width: 150px; margin-left: 5px;">
		
			<div style="display: flex; align-items: center;">
				<label for="pronoun" style="margin-right: 10px;">Pronome: </label>
				<select id="pronoun" name="pronoun">
					<option value="feminino">Feminino</option>
					<option value="masculino">Masculino</option>
					<option value="neutro">Neutro</option>
				</select>
			</div>
		
			<label for="instance">Instância: </label>
			<select id="instance" name="instance" onchange="showFields()">
				<option value="" disabled selected>Selecione...</option>
				<option value="Trabalhador">Trabalhador</option>
				<option value="Associação de Moradores">Associação de Moradores</option>
				<option value="Comitê de Bairro">Comitê de Bairro</option>
				<option value="Comitê de Fábrica">Comitê de Fábrica</option>
				<option value="Comitê do Campo">Comitê do Campo</option>
				<option value="Comitê de Rede de Distribuição">Comitê de Rede de Distribuição</option>
				<option value="Comitê de Rede de Serviço">Comitê de Rede de Serviços</option>
				<option value="Conselho Popular Distrital de Fábrica">Conselho Popular Distrital de Fábrica</option>
				<option value="Conselho Popular Distrital Urbano">Conselho Popular Distrital Urbano</option>
				<option value="Conselho Popular Distrital de Rede de Distribuição">Conselho Popular Distrital de Rede de Distribuição</option>
				<option value="Conselho Popular Distrital de Rede de Serviços">Conselho Popular Distrital de Rede de Serviços</option>
				<option value="Conselho Popular Municipal">Conselho Popular Municipal</option>
				<option value="Conselho Popular Regional Estadual">Conselho Popular Regional Estadual</option>
				<option value="Conselho Popular Estadual">Conselho Popular Estadual</option>
				<option value="Conselho Popular Regional Nacional">Conselho Popular Regional Nacional</option>
				<option value="Conselho Popular Nacional">Conselho Popular Nacional</option>
				<option value="Conselho Popular Regional Continental">Conselho Popular Regional Continental</option>
				<option value="Conselho Popular Continental">Conselho Popular Continental</option>
				<option value="Conselho Popular Intercontinental">Conselho Popular Intercontinental</option>
			</select>
			<br><br>

			<!-- Campos adicionais -->
			<div id="additionalFields" style="display: none; flex-direction: column; gap: 10px;">
			
				<label for="preposition" style="margin-right: 10px;">Preposição: </label>
				<select id="preposition" name="preposition" style="width: 80px;">
					<option value="de">de</option>
					<option value="da">da</option>
					<option value="do">do</option>
				</select>
			
				<div style="align-items: center;">
					<label for="jurisdiction" style="margin-right: 10px;">Jurisdição: </label>
					<input 
						type="text" 
						id="jurisdiction" 
						name="jurisdiction" 
						placeholder="Nome do Local, Região etc."
						style="
							color: gray; 
							font-style: italic; 
							width: 200px; 
							background-color: transparent; 
							border: 1px solid white;
							padding: 5px;
						"
						onfocus="this.style.color='white'; this.style.fontStyle='normal'; if(this.value==='Nome do Local, Região etc.')this.value='';" 
						onblur="if(this.value===''){this.style.color='gray'; this.style.fontStyle='italic'; this.value='Nome do Local, Região etc.';}"
					>
				</div>
				<div style="display: flex; align-items: center;">
					
				</div>
			</div>
			
			<br><br>
			<!-- Botão Cadastrar -->
			<button id="registerSubmitButton" onclick="handleRegister()">Cadastrar</button>
			
		</div>	
	</div>

	<br>


		</div>

	<button id="pythonButton">Executar o microsserviço python no servidor: helloMicroService.processarEExibirHelloWorld()</button>
	
	<div id="microserviceCanvaArea"></div>

	<div id="globeContainer"></div>


	<div id="logado" style="display: none;">

	<div id="conselheiroDeConselho">
		<div class="config-section">
			<h2>Tamanho da Economia</h2>
			<label for="numRows">Número de produtos:</label>
			<input type="number" id="numRows" value="3" min="1" onkeydown="handleEnter(event)">
			<label for="numCols">Número de Setores Produtivos:</label>
			<input type="number" id="numCols" value="3" min="1" onkeydown="handleEnter(event)">
			
			<button onclick="resizeTable()" class="btn">Redimensionar</button>
			<button onclick="confirmClearTable()">Limpar Tabela</button>
			<button onclick="resetEconomy()">Resetar Economia</button>

			<label><input type="checkbox" id="autoFillCheckbox" onchange="toggleAutoFill()"> Preenchimento Automático</label>
			
			<div style="margin-bottom: 10px;">
				<label for="conselhoPopularAssociadoDeConselhoPopular">Conselho Popular Associado:</label>
				<input 
					type="text" 
					id="conselhoPopularAssociadoDeConselhoPopular" 
					style="width: 300px;">
					
				<button class="btn" style="margin-left: 10px;" onclick="fetchEstimates()">Calcular Estimativas</button>
			</div>

			
		</div>

		<div class="input-section">
			<h2>Matriz Tecnológica</h2>
			<table id="inputTable">
				<thead>
					<tr>
						<th>Produtos / Setores Produtivos</th>
						<th><input type="text" value="Produção de Automóveis" readOnly></th>
						<th><input type="text" value="Produção de Computadores" readOnly></th>
						<th><input type="text" value="Produção de Celulares" readOnly></th>
					</tr>
				</thead>
				<tbody id="inputTechnologicalMatrixTableBody">
					<!-- Linhas serão preenchidas dinamicamente -->
				</tbody>
			</table>


			<h2 id="SecaoDemandaFinal">Demanda Final</h2>
	<table id="finalDemandTable">
		<thead>
			<tr>
				<th>Produto</th>
				<th>Demanda (mil)</th>
				<th>Ações</th>
			</tr>
		</thead>
		<tbody id="finalDemandInputs">
			<tr>
				<td>Automóveis</td>
				<td><input id="demand0" type="number" value="1"></td>
				<td><button onclick="openOptimizationModal(0)">Otimizar</button></td>
			</tr>
			<tr>
				<td>Computadores</td>
				<td><input id="demand1" type="number" value="0"></td>
				<td><button onclick="openOptimizationModal(1)">Otimizar</button></td>
			</tr>
			<tr>
				<td>Celulares</td>
				<td><input id="demand2" type="number" value="0"></td>
				<td><button onclick="openOptimizationModal(2)">Otimizar</button></td>
			</tr>
		</tbody>
	</table>

	<button onclick="planify()">Planificar</button>


		<!-- Modal para entrada de parâmetros de otimização -->
		<div id="optimizationModal" class="modal">
			<div class="modal-content">
				<div class="modal-title-bar">
					<img src="./images/estrelaVermelha.png" alt="Ícone de estrela">
					<span>Parâmetros de Otimização</span>
					&nbsp;<img src="./images/estrelaVermelha.png" alt="Ícone de estrela">
					<button class="close" onclick="closeOptimizationModal()">&times;</button>
				</div>
				<p><strong>Produto:</strong> <span id="productName"></span></p>
				<label for="workerLimit">Limite de Trabalhadores nas Fábricas:</label>
				<input type="number" id="workerLimit" required><br><br>
				<label for="workerHours">Carga Horária Diária (h):</label>
				<input type="number" id="workerHours" max="12" required><br><br>
				<label for="productionTime">Tempo para Produzir 1 Unidade (h):</label>
				<input type="number" id="productionTime" required><br><br>
				<label for="weeklyScale">Escala semanal (dias):</label>
				<input type="number" id="weeklyScale" min="1" max="7" required><br><br>
				<label for="nightShift">Turno Noturno:</label>
				<input type="checkbox" id="nightShift"><br><br>
				<button onclick="saveOptimizationInputs()">Salvar</button>
			</div>
		</div>



		<!-- Modal para exibir resultados de otimização -->
		<div id="optimizationResultModal" class="modal">
			<div class="modal-content">
				<div class="modal-title-bar">
					<img src="./images/estrelaVermelha.png" alt="Ícone de estrela">
					<span>Plano de Produção do Setor</span>
					&nbsp;<img src="./images/estrelaVermelha.png" alt="Ícone de estrela">
					<button class="close" onclick="closeOptimizationResultModal()">&times;</button>
				</div>
				<div id="optimizationResult"></div>
			</div>
		</div>


		<div class="output-section">
			<!-- Título "Planificação Otimizada", visível após clicar em "Planificar" -->
			<h2 id="planificationTitle" style="display: none;">Planificação Otimizada</h2>
			<div id="result"></div>
		</div>

	<!-- Botão "Dados copiáveis", visível após clicar em "Planificar" -->
	<button id="openCopyableDataModal" class="btn" style="display: none;">Dados copiáveis</button>

	<!-- Janela modal para exibir os dados copiáveis -->
	<div id="copyableDataModal" class="modal" style="display: none;">
		<div class="modal-content">
			<div class="modal-title-bar">
				<img src="./images/estrelaVermelha.png" alt="Ícone de estrela">
				<span>Dados Copiáveis</span>
				&nbsp;<img src="./images/estrelaVermelha.png" alt="Ícone de estrela">
				<button class="close" onclick="closeCopyableDataModal()">&times;</button>
			</div>

			<div class="modal-body">
				<h3>Matriz Tecnológica (para cópia)</h3>
				<pre id="matrixModalOutput" style="background-color: #333; color: white; padding: 10px; border-radius: 8px; overflow-x: auto;"></pre>
				<h3>Vetor de Demanda (para cópia)</h3>
				<pre id="vectorModalOutput" style="background-color: #333; color: white; padding: 10px; border-radius: 8px; overflow-x: auto;"></pre>
			</div>
		</div>
	</div>

		<button id="downloadDataButton" class="btn" style="display: none;">Salvar Localmente</button>
		<button id="uploadDataButton" class="btn">Upload de Arquivo</button>
		<input type="file" id="uploadInput" style="display: none;" accept=".csv" />
		<button id="sendDataButton" class="btn" onclick="sendDataToJsonBin()" style="display: none;">Salvar Online</button>
		<button id="fetchDataButton" class="btn" onclick="fetchDataFromJsonBin()">Receber Online</button>
	</div>
	</div>
	<div id="conselheiroDeComiteDeFabricaOuCampo">

	<div id="tamanhoUnidadeProdutivaSection">
		<h2>Informações da Unidade Produtiva</h2>
		<div class="config-section">
			<label for="quantidadeBensProducao" style="margin: 0;">Quantidade de Bens de Produção:</label>
			<input 
				type="number" 
				id="quantidadeBensProducao" 
				value="3" 
				min="1" 
				onkeydown="if (event.key === 'Enter') updateVetorTecnologicoTable()" 
				style="width: 100px;">
			<button onclick="updateVetorTecnologicoTable()">Redimensionar</button>
			
			 <!-- Novo campo de texto "Setor" -->
			<label for="setorUnidade" style="margin-left: 10px;">Setor:</label>
			<input 
				type="text" 
				id="setorUnidade" 
				placeholder="Digite o setor"
				style="width: 150px; margin-left: 5px;">
				
			<label for="comiteColTitle" style="margin-left: 10px;">Nome da Unidade de Produção:</label>
			<input type="text" id="comiteColTitle" placeholder="Digite o comitê" style="width: 150px; margin-left: 5px;">
			
			 <div style="margin-bottom: 10px;">
				<label for="limiteEfetivoTrabalhadores">Limite Efetivo de Trabalhadores na Unidade de Produção:</label>
				<input 
					type="number" 
					id="limiteEfetivoTrabalhadores" 
					style="width: 150px;">
			</div>

			<div style="margin-bottom: 10px;">
				<label for="conselhoPopularAssociadoDeComiteOuTrabalhador">Conselho Popular Associado:</label>
				<input 
					type="text" 
					id="conselhoPopularAssociadoDeComiteOuTrabalhador" 
					style="width: 300px;">
			</div>
			
			<div style="margin-bottom: 10px;">
				<button id="updateDemandAndGoalButton" class="btn" onclick="updateDemandAndGoal()">Atualizar Demanda e Meta</button>
			</div>
			
		</div>
	</div>

	<div id="vetorTecnologicoSection">
		<h2>Vetor Tecnológico</h2>
		<table id="vetorTecnologicoTable" class="input-section">
			<thead>
				<tr>
					<th>Bens de Produção</th>
					<th></th>
				</tr>
			</thead>
			<tbody>
				<!-- Linhas preenchidas dinamicamente -->
			</tbody>
		</table>
	</div>

	<div id="estoqueDemandaSection" class="input-section">
		<h2>Estoque e Demanda</h2>
		<table id="estoqueDemandaTable">
			<thead>
				<tr>
					<th>Bem de Produção</th>
					<th>Estoque (mil)</th>
					<th>Demanda (mil)</th>
					<th>
						<button id="propostaButton" class="btn" onclick="openPropostaModal()">Proposta</button>
					</th>
				</tr>
			</thead>
			<tbody>
				<!-- Linhas preenchidas dinamicamente -->
			</tbody>
		</table>
	</div>




	<!-- Modal "Proposta para demais Trabalhadores" -->
	<div id="propostaModal" class="modal" style="display: none;">
		<div class="modal-content">
			<div class="modal-title-bar">
				<img src="./images/estrelaVermelha.png" alt="Ícone de estrela">
				<span>Proposta para demais Trabalhadores</span>
				&nbsp;<img src="./images/estrelaVermelha.png" alt="Ícone de estrela">
				<button class="close" onclick="closePropostaModal()">&times;</button>
			</div>
			<p><strong>Nome da Unidade de Produção:</strong> <span id="unitName"></span></p>
			<label for="workerLimitProposta">Limite de Trabalhadores na Unidade de Produção:</label>
			<input type="number" id="workerLimitProposta" required><br><br>
			<label for="workerHoursProposta">Carga Horária Diária (h):</label>
			<input type="number" id="workerHoursProposta" max="12" required><br><br>
			<label for="productionTimeProposta">Tempo para Produzir 1 Unidade (h):</label>
			<input type="number" id="productionTimeProposta" required><br><br>
			<label for="weeklyScaleProposta">Escala semanal (dias):</label>
			<input type="number" id="weeklyScaleProposta" min="1" max="7" required><br><br>
			<label for="nightShiftProposta">Turno Noturno:</label>
			<input type="checkbox" id="nightShiftProposta"><br><br>
			<button onclick="savePropostaInputs()">Salvar</button>
		</div>
	</div>

	<div id="producaoMetaSection" class="input-section">
		<h2>Produção e Meta</h2>
		<table id="producaoMetaTable">
			<thead>
				<tr>
					<th>Produto</th>
					<th>Quantidade Produzida (mil)</th>
					<th>Quantidade que Falta ser Produzida (mil)</th>
					<th></th>
				</tr>
			</thead>
			<tbody>
				<tr>
					<td><input type="text" value="Produto Produzido"></td>
					<td><input id="producedQuantity" type="number" value="0"></td>
					<td><input id="pendingProductionQuantity" type="number" value="10000" readOnly></td>
					<td>
						<button class="btn" onclick="openProducaoMetaModal()">Planejamento</button>
					</td>
				</tr>
			</tbody>
		</table>
	</div>

	<!-- Modal para "Plano dessa Unidade de Produção" -->
	<div id="producaoMetaModal" class="modal" style="display: none;">
		<div class="modal-content">
			<div class="modal-title-bar">
				<img src="./images/estrelaVermelha.png" alt="Ícone de estrela">
				<span>Plano dessa Unidade de Produção</span>
				&nbsp;<img src="./images/estrelaVermelha.png" alt="Ícone de estrela">
				<button class="close" onclick="closeProducaoMetaModal()">&times;</button>
			</div>
			<div id="producaoMetaContent">
				<p><strong>Nome da Unidade de Produção:</strong> ${comiteColTitle}</p>
				<p><strong>Produto:</strong> ${productName}</p>
				<p><strong>Expediente:</strong> ${data.optimizationInputs[productIndex].workerHours} horas</p>
				<p><strong>Escala Semanal:</strong> ${data.optimizationResults[productIndex].workerHours}</p>
				<p><strong>Quantidade Necessária de Trabalhadores:</strong> ${optimizationInputs[productIndex].workerLimit}</p>
				<p><strong>Produção pendente:</strong> ${instanceData.producaoMeta}</p>
				<p><strong>Turno:</strong> ${instanceData.workShift}</p>
				<p><strong>Tempo para Produção (para contratação ou renovação):</strong> ${instanceData.totalEmploymentPeriod}</p>
			</div>
		</div>
	</div>


	</div>


	<div id="conselheiroDeAssociacaoDeMoradores"> Conselheiro de Associação de Moradores </div>

	<div id="trabalhador">
	
	<div id="workCertificateSection">
		
		<div id="workCertificateSection">
		<h2>Certificado de Trabalho</h2>
		<div class="worker-config-section">
			<!-- QR Code --><br/>
			<div id="uuidQRCode"></div>

			<!-- Campos de entrada -->
			<div>
				<label for="name" style="margin-left: 10px;">Nome:</label>
				<input type="text" id="name" placeholder="Nome ainda não cadastrado" style="width: 150px; margin-left: 5px;" readOnly>

				<label for="conselhoPopularAssociadoDeComiteOuTrabalhadorTelaTrabalhador">
					Conselho de Distribuição e Serviço Associado:
				</label>
				<input type="text" id="conselhoPopularAssociadoDeComiteOuTrabalhadorTelaTrabalhador" style="width: 300px;">

				<label for="comiteAssociadoDeTrabalhador">Comitê de Unidade de Produção Associado:</label>
				<input type="text" id="comiteAssociadoDeTrabalhador" style="width: 300px;">

				<label for="associacaoDeMoradoresAssociadaDeTrabalhador">Associação de Moradores Associada:</label>
				<input type="text" id="associacaoDeMoradoresAssociadaDeTrabalhador" style="width: 300px;">

				<label for="hoursAtElectronicPoint">Horas no Ponto Eletrônico (h no mês):</label>
				<input type="number" id="hoursAtElectronicPoint" style="width: 150px;">

				<label for="partipacaoIndividualEstimadaNoTrabalhoSocial">
					Participação Individual no Trabalho Social (<span id="socialWorkAndCostScale"></span>):
				</label>
				<div style="display: flex; align-items: center; gap: 10px;">
				<span id="unidade"></span> <input type="text" id="partipacaoIndividualEstimadaNoTrabalhoSocial" style="width: 150px;" readOnly>
				</div>
			</div>
		</div>
	</div>
	</div>

	<div id="pedidosDeRetirada">
		<h2>Pedidos de Retirada</h2>
		
		<div class="tabs">
			<button id="tabBensDeConsumo" class="btn btn-primary active">Bens de Consumo</button>
			<button id="tabServicos" class="btn btn-primary">Serviços</button>
		</div>

		<div>
			<table id="bensDeConsumoTable" class="bensDeConsumoDistribuicaoClass">
				<thead>
					<tr>
						<th style="padding: 5px;">Bem de Consumo</th>
						<!-- Essa demanda é dividida por mil ao salvar e multiplicada por mil ao carregar na tela -->
						 <!-- pois a planificação considera demandas de mil em mil, para a produção, mas para consumo individual é de unidade em unidade, por isso dividir por mil para o calculo ser feito corretamente -->
						<th style="padding: 5px;">Demanda</th>
					</tr>
				</thead>
				<tbody>
					<!-- Linhas preenchidas dinamicamente -->
				</tbody>
			</table>

			<table id="servicosTable" class="servicosDistribuicaoClass">
				<thead>
					<tr>
						<th style="padding: 5px;">Serviços</th>
						<!-- Essa demanda é dividida por mil ao salvar e multiplicada por mil ao carregar na tela -->
						 <!-- pois a planificação considera demandas de mil em mil, para a produção, mas para consumo individual é de unidade em unidade, por isso dividir por mil para o calculo ser feito corretamente -->
						<th style="padding: 5px;">Demanda</th>
					</tr>
				</thead>
				<tbody>
					<!-- Linhas preenchidas dinamicamente -->
				</tbody>
			</table>
		</div>
		&nbsp;<br>
		<div id="plannedDistributionShowcase">
			
		</div>

	</div>
	
	
	</div>

	<script src="js/models/distribution.js"></script>
	<script src="js/app.js"></script>
	</body>
	</html>